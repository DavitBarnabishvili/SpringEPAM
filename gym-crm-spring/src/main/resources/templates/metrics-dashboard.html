<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym CRM Metrics Dashboard</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); padding: 2rem;}
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap:1.5rem; margin-bottom:2rem;}
        .metric-card { background:white; border-radius:15px; padding:1.5rem; box-shadow:0 10px 30px rgba(0,0,0,0.2);}
        .metric-label { color:#6b7280; font-size:.875rem; text-transform:uppercase; margin-bottom:.5rem;}
        .metric-value { font-size:2.5rem; font-weight:bold; color:#1f2937; margin-bottom:.5rem;}
        .metric-unit { color:#9ca3af; font-size:1rem;}
        .success-rate { background: linear-gradient(135deg,#10b981 0%,#059669 100%); color:white;}
        .warning { background: linear-gradient(135deg,#f59e0b 0%,#d97706 100%); color:white;}
        .refresh-btn { display:block; margin:2rem auto; padding:1rem 2rem; background:white; color:#667eea; border:none; border-radius:50px; cursor:pointer;}
    </style>
    <script>
        setTimeout(() => location.reload(), 30000);
    </script>
</head>
<body>
<h1 style="text-align:center;color:white;">üèãÔ∏è Gym CRM Metrics Dashboard</h1>

<h2 style="color:white;text-align:center;">Business Metrics</h2>
<div class="metrics-grid">
    <div class="metric-card">
        <div class="metric-label">Trainee Registrations</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(traineeRegistrations, 1, 0)}"></div>
        <div class="metric-unit">total registrations</div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Trainer Registrations</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(trainerRegistrations, 1, 0)}"></div>
        <div class="metric-unit">total registrations</div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Training Sessions</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(trainingsCreated, 1, 0)}"></div>
        <div class="metric-unit">sessions created</div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Login Attempts</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(loginAttempts, 1, 0)}"></div>
        <div class="metric-unit">total attempts</div>
    </div>

    <div class="metric-card success-rate">
        <div class="metric-label">Login Success Rate</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(loginSuccessRate, 1, 1)} + '%'"></div>
        <div class="metric-unit" th:text="${loginSuccess} + ' successful logins'"></div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Avg Auth Time</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(authTime, 1, 1)}"></div>
        <div class="metric-unit">milliseconds</div>
    </div>
</div>

<h2 style="color:white;text-align:center;">System Metrics</h2>
<div class="metrics-grid">
    <div class="metric-card">
        <div class="metric-label">Memory Usage</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(memoryUsed, 1, 1)} + ' / ' + ${memoryMax}"></div>
        <div class="metric-unit">MB used / max</div>
    </div>

    <div class="metric-card" th:classappend="${cpuUsage > 80} ? ' warning'">
        <div class="metric-label">CPU Usage</div>
        <div class="metric-value" th:text="${#numbers.formatDecimal(cpuUsage, 1, 2)} + '%'"></div>
        <div class="metric-unit">processor usage</div>
    </div>
</div>

<button class="refresh-btn" onclick="location.reload()">üîÑ Refresh Now</button>
<div style="text-align:center;color:white;margin-top:1rem;opacity:0.8;" th:text="'Last updated: ' + ${timestamp}"></div>
</body>
</html>
